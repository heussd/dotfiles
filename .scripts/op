#!/bin/bash

[ -e "$1" ] && cd "$1"
if [ "$PWD" = "$HOME" ]; then
	cd "$TH_PROJECTS_FOLDER" || exit 1
fi
sel=$(ls -t | fzf)

if [[ "$sel" = *"-made" ]]; then
	op "$sel"
fi

cd $sel
pwd

kitty @ launch --type=tab --tab-title "$sel" --cwd "$(pwd)"

function openApp() {
	echo "Opening App $1..."
	open -na "$1" --args "$(pwd)"
}

[ -d .git ] && stree .

[ -f package.json ] && openApp "WebStorm"

[ -f "pom.xml" ] && openApp "IntelliJ IDEA"
[ -f "build.gradle.kts" ] && openApp "IntelliJ IDEA"
[ -f "build.gradle" ] && openApp "IntelliJ IDEA"

[ -f "requirements.txt" ] && openApp "PyCharm"

